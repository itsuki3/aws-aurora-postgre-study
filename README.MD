# Amazon Redshift ハンズオン - Day1

# 1. 環境構築準備
## 1-0. ハンズオンで利用するアカウント
* TBD
```
TBD
```

## 1-1. ハンズオン向けコンテンツの取得
```
利用するデータやスクリプトのダウンロード
```

## 1-2. CloudFormationによるハンズオン環境の構築
* 「サービス」 → 「CloudFormation」 → 「スタックの作成」→
* 「新しいスタックの作成」ボタン →　
* 「Amazon S3 テンプレート URL の指定」チェックボックス →
*  https://<your_workshop_bucket>.s3.amazonaws.com/master.yaml を入力　→
*  スタックの名前 : aws-XXXX-study　(XXXXはユーザー名)　を入力　→
*  MasterUserPass : xxxxxx (8文字以上、半角英数字大文字小文字いずれも１文字以上含む)を入力　→
* 「次へ」ボタン →　オブション入力画面はデフォルトのまま「次へ」ボタン　→
*  確認画面の最下部の「AWS CloudFormation によってカスタム名のついた IAM リソースが作成される場合があることを承認します。」チェックボックスをチェック　→　「作成」ボタン
* ステータスが "CREATE_COMPLETE"　になるまで待ちます

**以下のスタックが構築されます:**
```
aws-XXXX-study-SecurityGroupStack-XXXXXXXXXXXXX [NESTED]
aws-XXXX-study-IAMStack-XXXXXXXXXXXX [NESTED]
aws-XXXX-study-VPCStack-XXXXXXXXXXXX [NESTED]
aws-XXXX-study
```

# 2. 接続確認

## 2-1. Management Console（MC）からデータベースの状態を確認
* 「サービス」→「Redshift」→「クラスター」タブに移動します。
* クラスターが作成されていることを確認します。
* 「クラスター」→当該クラスターをクリックすると、そのクラスターに移動して詳細情報を閲覧できます。「設定」タブ、「ステータス」タブをクリックして、それぞれどのような情報が表示されるか確認してみて下さい。

## 2-2. データベースへの接続確認
### 2-2-1 接続設定の作成
* PC上にインストールされている、Aginity Workbench for Redshiftを起動します。
* 接続情報を以下の通り入力します。
```
TBD
```
* Redshiftクラスターのエンドポイント名は、**2-1.**に記載のクラスター詳細情報から探してみて下さい。

### 2-2-2 接続とテスト
* 入力した接続情報に基づいて、実際にRedshiftクラスターに接続します。
```
TBD
```

# 3. ハンズオン
ここでは、Redshiftの基本的な使い方についてハンズオンを行っていきます。

## 3-1. COPYの実行
* TBD

```
入力するコマンドなど(コピペで可能な様に）
```

## 3-2. メンテナンストラック、パラメーターグループ設定、WLM設定の閲覧
* TBD

```
入力するコマンドなど(コピペで可能な様に）
```

## 3-3. クエリーの実行
* TBD

```
入力するコマンドなど(コピペで可能な様に）
```
## 3-4. COPYおよびクエリーの実行状況の確認

### 3-4-1 COPY（ロード）の実行確認
* TBD

### 3-4-2 クエリーの実行確認
* TBD

### 3-4-3 クラスターの性能情報確認
* TBD

## 3-5. バックアップの取得
* TBD

## 3.6. イベントの閲覧
* TBD

## 3.7. リストア
### 3.7.1 リストアの実行とクエリーの実行
* TBD

### 3.7.2. テーブルレベルの復元
* TBD


## 4. ハンズオン環境の削除
* TBD






# Amazon Aurora PostgreSQL ハンズオン - Day1

# 1. 環境構築準備
## 1-0. ハンズオンで利用するアカウント
* TBD
```
TBD
```

## 1-1. ハンズオン向けコンテンツの取得
```
利用するデータやスクリプトのダウンロード
```


## 1-2. CloudFormationによるハンズオン環境の構築
* 「サービス」 → 「CloudFormation」 → 「スタックの作成」→
* 「新しいスタックの作成」ボタン →　
* 「Amazon S3 テンプレート URL の指定」チェックボックス →
*  https://<your_workshop_bucket>.s3.amazonaws.com/master.yaml を入力　→
*  スタックの名前 : aws-XXXX-study　(XXXXはユーザー名)　を入力　→
*  MasterUserPass : xxxxxx (8文字以上、半角英数字大文字小文字いずれも１文字以上含む)を入力　→
* 「次へ」ボタン →　オブション入力画面はデフォルトのまま「次へ」ボタン　→
*  確認画面の最下部の「AWS CloudFormation によってカスタム名のついた IAM リソースが作成される場合があることを承認します。」チェックボックスをチェック　→　「作成」ボタン
* ステータスが "CREATE_COMPLETE"　になるまで待ちます

**以下のスタックが構築されます:**
```
aws-XXXX-study-SecurityGroupStack-XXXXXXXXXXXXX [NESTED]
aws-XXXX-study-IAMStack-XXXXXXXXXXXX [NESTED]
aws-XXXX-study-VPCStack-XXXXXXXXXXXX [NESTED]
aws-XXXX-study
```

# 2. 接続確認

## 2-1. Management Console (MC) からデータベースの状態を確認
* 「サービス」→「RDS」→サイドバーの「クラスター」→クラスタータブに移動します。
* クラスターが作成され、「状況」が"利用可能"になっていることを確認します。
* 作成されているDBクラスター識別子のリンクをクリックして、クラスターの詳細情報を確認してみてください。Cluster Endpoint、Reader Endpointなどの詳細情報が確認できます。確認したEndpointをメモ帳などにコピーしておいてください。接続設定の作成で利用します。

* サイドーバーの「インスタンス」→インスタンスタブに移動します。
* DBインスタンスタブに、3つのDBインスタンスが作成されていることを確認してください。
* 各DBインスタンスの「ステータス」が"利用可能"になっていることを確認してください。
* 各DBインスタンス名のリンクをクリックして、詳細情報を確認してみてくてください。Replicationペインでは、3つのDBインスタンスが、Writerなのか、Readerなのか確認することができます。また、各DBインスタンスの Instance Endpoint等なども確認できます。

## 2-2. データベースへの接続確認
# 2-2-1 接続設定の作成
* PC常にインストールされている Psqledit を起動します。
* 接続情報をいかの通り入力します。 ## 2-1. でコピーした Cluster Endpointと Writer Endpoint向けの2つの接続設定を作成します。
```
TBD
```
# 2-2-2 接続とテスト
* 作成したWriter Endpoint接続設定と、Reader Endpoint向け接続設定、ぞれぞれの情報に基づいて、実際に各エンドポイントに接続します。
```
TBD
```
# 3. ハンズオン
* ここでは、Aurora PostgreSQLの基本的な使い方についてハンズオンを行なっていきます。

## 3-1. Cluster Endpointからの接続
* 以下のコマンド、DDL、SQL文を実行し、Cluster Endpointから表作成、データ登録など書き込み操作が行えることを確認します。書き込み操作の確認できたらデータベースからdisconnectします。
```
入力するコマンドなど(コピペで可能な様に）
```

## 3-2. Reader Endpoinstからの接続
* ## 3-1.と同じコマンドを Reader Endpointから行なってみてください。何が起こりましたか？

```
入力するコマンドなど(コピペで可能な様に）
```
* 以下の、クエリーを実行してみてください。何が起こりましたか？

```
入力するコマンドなど(コピペで可能な様に）
```

## 3-3. スナップショットの取得
* 手動で取得したスナップショツトはデータベースを完全に削除した場合でも削除されません。
```
入力するコマンドなど(コピペで可能な様に）
```

## 3-4. Replicaの追加(Readerの追加)

```
入力するコマンドなど(コピペで可能な様に）
```

## 3-5. Replicaの削除(Readerの削除)

```
入力するコマンドなど(コピペで可能な様に）
```
## 3-6. Clusterの停止
```
入力するコマンドなど(コピペで可能な様に）
```
## 3-7. Clusterの開始
```
入力するコマンドなど(コピペで可能な様に）
```
## 3-8. クラスター内の全DBインスタンスの削除
```
入力するコマンドなど(コピペで可能な様に）
```
## 3-9. リストア
```
入力するコマンドなど(コピペで可能な様に）
```

## 4. ハンズオン環境の削除
* ## 3-8. と同じ手順でクラスター内の全DBインスタンスを削除してください。
* "削除中"というステータスなった状態でMCからログアウトしていただいて構いません。
